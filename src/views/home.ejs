<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css" />
    <title>Certification APP - Admin</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>

    <nav class="navbar navbar-expand-sm bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <img src="./logo.png" alt="Logo" style="width:40px;" class="rounded-pill"> 
          </a>
        </div>        
        <div class="container-fluid">
          <ul class="navbar-nav">
            <li class="nav-item">
              <% if (user.admin === 0){ %>
                <a class="nav-link disabled" href="/addNew">Add New News</a>
              <% } else { %>
                <a class="nav-link" href="/addNew">Add New News</a>
              <% } %>
            </li>
            <li class="nav-item">
                <% if (user.admin === 0){ %>
                  <a class="nav-link disabled" href="/">Data View List</a>
                <% } else { %>
                  <a class="nav-link" href="/">Data View List</a>
                <% } %>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="/register">Register</a>
              </li>
              <li class="nav-item">
                <% if (user.name === ''){ %>
                  <a class="nav-link" href="/login">Login</a>
                <% } else { %>
                  <a class="nav-link disabled" href="/login">Login</a>
                <% } %>
                </li>
              <li class="nav-item">
                <% if (user.name === ''){ %>
                  <a class="nav-link disabled" href="/logout">Logout</a>
                <% } else { %>
                  <a class="nav-link" href="/logout">Logout</a>
                <% } %>
              </li>
          </ul>
        </div>
    </nav>
  <div class="container">
        <table id="table_id">
          <thead>
            <tr>
              <th class="subj_name">Title</th>
              <th>Description</th>
              <th>Publish At</th>
              <th colspan="2">Edit/Delete</th>
            </tr>
          </thead>
          <tbody>
            <% for(let i = 0; i < news.length; i++ ){ %>
                <tr>
                  <td><%= news[i].title %></td>
                  <td><%= news[i].description %></td>
                  <td><%= news[i].publishdate %></td>
                  <td>
                    <% if (user.admin === 0){ %>
                      <form action="/update_new" method="post" id="delete_form" name="delete_form">
                        <button type="submit" class="btn btn-warning">Edit</button>
                      </form>
                      <form action="/delete_new/<%= news[i].title %>"  method="post" id="update_form" name="update_form">
                        <button type="submit" class="btn btn-danger">Delete</button>
                      </form>
                    <% } else { %>
                        &nbsp;
                    <% } %>
                  </td>
                </tr>
            <% } %>
          </tbody>
          </table>
      </div>
      <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js" ></script>
      <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
      <script>
        $(function() {
          $("#table_id").dataTable();
        });
      </script>
  </body>
</html>
